# PaPut MCP サーバー

[PaPut](https://paput.io) と連携する Model Context Protocol (MCP) サーバーです。
AI アシスタント（Windsurf、Cursor、Claude Desktop 等）から PaPut の様々な機能を利用できます。

## 機能

### メモ管理

- メモの作成、検索、取得、更新、削除
- カテゴリの設定と管理
- 公開/非公開設定

### ノート管理

- ノートの作成、検索、取得、更新、削除
- メモとの関連付け

### アイデア管理

- アイデアの作成、一覧表示、更新、削除

### スキルシート管理

- スキルシートの取得
- 基本情報の更新（生年月日、性別、最寄駅、経験年数）
- 自己PRの更新
- スキル情報の個別管理（追加、更新、削除、一括更新）
- プロジェクト情報の個別管理（追加、更新、削除、検索）

## インストール

npm を使用してグローバルにインストールする場合:

```bash
npm install -g paput-mcp
```

または、npx を使用して直接実行することもできます:

```bash
npx paput-mcp
```

## 設定方法

### 各 AI アシスタントの設定

API キーは PaPut の設定画面から取得できます。

```json
"paput": {
  "command": "npx",
  "args": ["-y", "paput-mcp"],
  "env": {
    "PAPUT_API_KEY": "あなたのAPIキー",
    "PAPUT_PROJECT_MATCH": "プロジェクト名の一部（オプション）"
  }
}
```

### プロジェクト自動紐付け機能

`PAPUT_PROJECT_MATCH` 環境変数を設定すると、メモ作成・更新時に自動的にプロジェクトが紐付けられます。

```json
"env": {
  "PAPUT_API_KEY": "your-api-key",
  "PAPUT_PROJECT_MATCH": "ECサイト"  // プロジェクトタイトルの一部を指定
}
```

- 指定した文字列を含むプロジェクトが自動的に選択されます
- 複数マッチした場合は最初のプロジェクトが選択されます

## 使用方法

設定が完了したら、AI アシスタントから以下のツールを利用できます：

### 利用可能なツール

#### メモ管理

- `paput_create_memo` - メモを作成
- `paput_search_memo` - メモを検索
- `paput_get_memo` - メモの詳細を取得
- `paput_update_memo` - メモを更新
- `paput_get_categories` - カテゴリー一覧を取得

#### ノート管理

- `paput_create_note` - ノートを作成
- `paput_search_notes` - ノートを検索
- `paput_get_note` - ノートの詳細を取得
- `paput_update_note` - ノートを更新

#### アイデア管理

- `paput_list_ideas` - アイデア一覧を取得
- `paput_create_idea` - アイデアを作成
- `paput_update_idea` - アイデアを更新
- `paput_delete_idea` - アイデアを削除

#### スキルシート管理

- `paput_get_skill_sheet` - スキルシートを取得
- `paput_update_skill_sheet_basic_info` - スキルシート基本情報を更新
- `paput_update_skill_sheet_self_pr` - スキルシート自己PRを更新
- `paput_get_skill_sheet_skills` - スキルシートスキル一覧を取得
- `paput_update_skill_sheet_skills` - スキルシートのスキル一覧を一括更新
- `paput_add_skill_sheet_skill` - スキルシートにスキルを追加
- `paput_update_skill_sheet_skill` - スキルシートのスキルを更新
- `paput_delete_skill_sheet_skill` - スキルシートからスキルを削除
- `paput_get_skill_sheet_projects` - スキルシートプロジェクト一覧を取得
- `paput_add_skill_sheet_project` - スキルシートにプロジェクトを追加
- `paput_update_skill_sheet_project` - スキルシートのプロジェクトを更新
- `paput_delete_skill_sheet_project` - スキルシートからプロジェクトを削除

以下、推奨する使用方法です。

### AI アシスタントのルール設定

AI アシスタントの設定（.windsurfrules など）に以下を追加してください。（あくまで例です。ご自身の要件に応じて調整してください。）

```
## メモ作成依頼について（paput-mcp）
メモ作成を依頼した場合、以下を準拠する
- 一つのメモが大きくなりすぎないように、最小の粒度でメモを作成する
- タイトル、内容、カテゴリー（複数可）を提示する
- 文章は、です/ます 調にしない
- カテゴリーは、言語、フレームワーク、ツールくらいの粒度で設定する（例: バックエンド のような大きな括りは設定しない）
- プロジェクト固有のコードを含めない
- 勝手に MCP を経由してメモを作成せず、明示的に指示するまではチャット上にメモを提示すること
- 基本的に非公開に設定し、明示的に指示した場合のみ公開にする
- 内容には、マークダウンの # で始まる行を含めない（タイトルに相当するため）
```

### プロンプト例

1. 登録すべきメモを提示してもらう（推奨）

```
ここまでの開発をメモにして提示してください。
```

2. メモ確認し問題がなかったら、登録する

```
提案された内容で、PaPut にメモを作成してください。
```

いきなり 2 の方法を実施すると、意図しないメモが登録されてしまう可能性があるため、1 の方法を挟んでからメモを登録することを推奨します。
また、各 AI アシスタントのルール設定で、自分好みのメモを作成してもらえるように、ある程度コントロールすることが可能です。

## Claude Code の Custom Slash Command の使用例

以下の設定を `~/.claude/commands/paput.md` ファイルとして保存すると、Claude Code で `/paput` コマンドが使用できます：

````markdown
---
allowed-tools: mcp__paput__paput_create_memo, mcp__paput__paput_search_memo, mcp__paput__paput_get_categories
description: 問題解決時の知見やベストプラクティスをPaPutにメモとして保存
argument-hint: (任意) 保存したい知見の概要
---

## PaPut メモ作成コマンド

このコマンドは、コーディング中に得られた知見を PaPut にメモとして保存します。

### 使用方法

```bash
# 会話全体から知見を自動抽出
/paput

# 特定の知見についてメモ化（例）
/paput Bunでのマイグレーション手順
/paput JWT認証のエラーハンドリング方法
/paput クリーンアーキテクチャでのリポジトリ実装パターン
```

### メモ作成のタイミング

以下のような場面で、自動的にメモの下書きを提示します：

1. **問題解決時の知見** - バグ修正や問題解決で得られた知識
2. **設計・アーキテクチャ決定** - システム設計の重要な決定事項
3. **ベストプラクティスの発見** - より良い実装方法の発見
4. **デバッグ手法の確立** - 効果的なデバッグ方法の発見
5. **タスク完了時に得られた知見** - タスク完了後の学び

### 処理フロー

1. 現在の会話内容から、保存すべき知見を分析
2. メモの下書きを提示（タイトル、内容、カテゴリー）
3. ユーザーの確認・修正を待つ
4. 承認されたら PaPut に登録

### メモ作成ルール

- 一つのメモが大きくなりすぎないよう、最小の粒度で作成
- タイトル、内容、カテゴリー（複数可）を提示
- 文章は「です/ます」調にしない
- カテゴリーは言語、フレームワーク、ツールレベルの粒度
- プロジェクト固有のコードは含めない
- 基本的に非公開設定（明示的な指示がない限り）
- 内容にマークダウンの # で始まる行は含めない
````
